{"version":3,"sources":["../node_modules/@material-ui/icons/MoreVert.js","../node_modules/@material-ui/icons/Edit.js","views/pages/dashboard/index.tsx"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","useStyles","makeStyles","theme","createStyles","root","marginTop","spacing","flexGrow","board","height","padding","color","palette","text","primary","transition","cursor","boxShadow","fontWeight","fontSize","display","overflow","marginBottom","boardAdd","flexDirection","justifyContent","textAlign","background","borderStyle","borderColor","borderRadius","grid","moreIcon","float","opacity","moreIconHidden","loadingSelector","createLoadingSelector","types","GET_BOARDS_USER","CREATE_BOARD","errorSelector","createErrorSelector","DELETE_BOARD","connector","connect","state","selectedBoard","dashboard","boards","loading","error","dispatch","dispatchGetBoardsByUser","actions","getBoardsByUser","dispatchCreateBoard","title","createBoard","dispatchDeleteBoard","id","deleteBoard","dispatchUpdateBoard","updateBoard","dispatchClearErrors","clearErrors","dispatchSelectBoard","dashboardActions","selectBoard","useCustomState","showMoreIcon","anchorEl","setState","confirmDialog","useConfirmDialog","inputDialog","useInputDialog","history","useHistory","classes","React","showToast","handleMouseLeave","handleCloseMenu","e","stopPropagation","handleDeleteBoard","a","variant","description","handleEditBoard","inputName","defaultValue","hasResult","handleAddNewBoard","okText","className","container","length","map","key","item","xs","sm","md","elevation","onMouseEnter","onMouseLeave","onClick","push","handleClick","aria-label","aria-controls","aria-haspopup","currentTarget","handleOpenMenu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","ml","format","createdAt"],"mappings":"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","file":"static/js/5.2579fe2c.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n}), 'MoreVert');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\n\nexports.default = _default;","import * as React from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\nimport Loader from '../../../components/Loader';\nimport { RootState } from '../../../store/ducks';\nimport { actions as dashboardActions } from '../../../store/ducks/dashboard';\nimport { actions, types } from '../../../store/ducks/api/board';\nimport { createLoadingSelector } from '../../../store/ducks/loading';\nimport { createErrorSelector } from '../../../store/ducks/error';\nimport { ThunkVoidAction, ThunkVoidDispatch } from '../../../store/types';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { useCustomState } from '../../../utils/customHooks';\nimport { showToast } from '../../../utils/showToast';\nimport Moment from 'react-moment';\nimport { useInputDialog } from '../../../utils/InputDialogProvider';\nimport { useConfirmDialog } from '../../../utils/ConfirmDialogProvider';\nimport { IBoard } from '../../../store/models';\nimport { useHistory } from 'react-router-dom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Box from '@material-ui/core/Box';\n\nconst useStyles = makeStyles((theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(5),\n      flexGrow: 1,\n    },\n    board: {\n      height: '140px',\n      padding: theme.spacing(2),\n      color: theme.palette.text.primary,\n      transition: '0.3s',\n      cursor: 'pointer',\n      '&:hover': {\n        boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.4)',\n      },\n      '& .title': {\n        marginTop: theme.spacing(2),\n        fontWeight: '500',\n        fontSize: '16px',\n        display: '-webkit-box',\n        '-webkit-line-clamp': 2,\n        '-webkit-box-orient': 'vertical',\n        overflow: 'hidden',\n      },\n      '& .dateCreated': {\n        fontSize: '12px',\n        color: '#969696',\n        marginBottom: '0',\n      },\n    },\n    boardAdd: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      height: '140px',\n      padding: '5% 0',\n      textAlign: 'center',\n      background: 'rgba(255, 255, 255, 0.1)',\n      color: '#858585',\n      borderStyle: 'dashed',\n      borderColor: '#b3b2b2',\n      borderRadius: '5px',\n      boxShadow: 'none',\n      transition: '0.2s',\n      cursor: 'pointer',\n      '&:hover': {\n        borderColor: '#585858',\n        color: '#585858',\n      },\n    },\n    grid: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n    },\n    moreIcon: {\n      float: 'right',\n      color: '#796a6c',\n      opacity: '0.6',\n      transition: '0.3s',\n      '&:hover': {\n        opacity: '1',\n      },\n    },\n    moreIconHidden: {\n      float: 'right',\n      opacity: '0',\n    },\n  })\n);\n\nconst Dashboard: React.FC<PropsFromRedux> = ({\n  dispatchGetBoardsByUser,\n  dispatchCreateBoard,\n  dispatchDeleteBoard,\n  dispatchUpdateBoard,\n  dispatchClearErrors,\n  dispatchSelectBoard,\n  boards,\n  loading,\n  error,\n}) => {\n  const [state, setState] = useCustomState({\n    showMoreIcon: {},\n    anchorEl: {},\n  });\n  const confirmDialog = useConfirmDialog();\n  const inputDialog = useInputDialog();\n  const history = useHistory();\n  const classes = useStyles();\n\n  React.useEffect(() => {\n    if (!boards) {\n      dispatchGetBoardsByUser();\n    }\n  }, [boards, dispatchGetBoardsByUser]);\n\n  React.useEffect(() => {\n    if (error) {\n      showToast('Error', error, 'danger', dispatchClearErrors);\n    }\n  }, [dispatchClearErrors, error]);\n\n  const handleMouseEnter = (id: string) => {\n    setState({\n      showMoreIcon: { [id]: true },\n    });\n  };\n\n  const handleMouseLeave = () => {\n    setState({\n      showMoreIcon: {},\n    });\n  };\n\n  const handleOpenMenu = (e: React.MouseEvent<HTMLElement>, id: string) => {\n    e.stopPropagation();\n    setState({\n      anchorEl: { [id]: e.currentTarget },\n    });\n  };\n\n  const handleCloseMenu = (e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    e.stopPropagation();\n    setState({\n      anchorEl: {},\n    });\n  };\n\n  const handleClick = (board: IBoard) => {\n    dispatchSelectBoard(board);\n    history.push('/dashboard/board');\n  };\n\n  const handleDeleteBoard = async (\n    e: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    id: string\n  ) => {\n    e.stopPropagation();\n    handleCloseMenu(e);\n    const shouldDelete = await confirmDialog({\n      variant: 'danger',\n      title: 'Are you sure?',\n      description: 'Do you wish to delete the board?',\n    });\n    if (shouldDelete) {\n      dispatchDeleteBoard(id);\n    }\n  };\n\n  const handleEditBoard = async (\n    e: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    board: IBoard\n  ) => {\n    e.stopPropagation();\n    handleCloseMenu(e);\n    const { value, hasResult } = await inputDialog({\n      title: 'Edit a board',\n      inputName: 'Board Title',\n      defaultValue: board.title,\n    });\n    if (hasResult) {\n      dispatchUpdateBoard(board.id, value);\n    }\n  };\n\n  const handleAddNewBoard = async () => {\n    const { value, hasResult } = await inputDialog({\n      title: 'Add a board',\n      inputName: 'Board Title',\n      okText: 'Create',\n    });\n    if (hasResult) {\n      dispatchCreateBoard(value);\n    }\n  };\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <Container className={classes.root}>\n      <Typography variant=\"h5\">My Boards</Typography>\n      <Grid className={classes.grid} container spacing={3}>\n        {boards &&\n          boards.length > 0 &&\n          boards.map((board) => (\n            <Grid key={board.id} item xs={12} sm={6} md={3}>\n              <Paper\n                elevation={2}\n                className={classes.board}\n                onMouseEnter={() => {\n                  handleMouseEnter(board.id);\n                }}\n                onMouseLeave={handleMouseLeave}\n                onClick={() => {\n                  handleClick(board);\n                }}\n              >\n                <IconButton\n                  className={\n                    state.showMoreIcon[board.id]\n                      ? classes.moreIcon\n                      : classes.moreIconHidden\n                  }\n                  aria-label=\"user account\"\n                  aria-controls=\"menu-appbar\"\n                  aria-haspopup=\"true\"\n                  onClick={(e) => handleOpenMenu(e, board.id)}\n                >\n                  <MoreVertIcon />\n                </IconButton>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={state.anchorEl[board.id]}\n                  anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  open={Boolean(state.anchorEl[board.id])}\n                  onClose={handleCloseMenu}\n                >\n                  <MenuItem\n                    onClick={(e) => {\n                      handleEditBoard(e, board);\n                    }}\n                  >\n                    <EditIcon />\n                    <Box ml={1}>Edit</Box>\n                  </MenuItem>\n                  <MenuItem\n                    onClick={(e) => {\n                      handleDeleteBoard(e, board.id);\n                    }}\n                  >\n                    <DeleteOutlineIcon />\n                    <Box ml={1}>Delete</Box>\n                  </MenuItem>\n                </Menu>\n                <p className=\"title\">{board.title}</p>\n                <p className=\"dateCreated\">\n                  <Moment format=\"DD/MM/YYYY\">{board.createdAt}</Moment>\n                </p>\n              </Paper>\n            </Grid>\n          ))}\n        <Grid item xs={12} sm={6} md={3}>\n          <Paper\n            onClick={handleAddNewBoard}\n            elevation={2}\n            className={classes.boardAdd}\n          >\n            + Add a new board\n          </Paper>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nconst loadingSelector = createLoadingSelector([\n  types.GET_BOARDS_USER,\n  types.CREATE_BOARD,\n]);\nconst errorSelector = createErrorSelector([\n  types.GET_BOARDS_USER,\n  types.CREATE_BOARD,\n  types.DELETE_BOARD,\n]);\n\nconst mapStateToProps = (state: RootState) => ({\n  selectedBoard: state.dashboard.board,\n  boards: state.board.boards,\n  loading: loadingSelector(state),\n  error: errorSelector(state),\n});\n\nconst mapDispatchToProps = (dispatch: ThunkVoidDispatch) => ({\n  dispatchGetBoardsByUser: (): ThunkVoidAction =>\n    dispatch(actions.getBoardsByUser()),\n  dispatchCreateBoard: (title: string): ThunkVoidAction =>\n    dispatch(actions.createBoard(title)),\n  dispatchDeleteBoard: (id: string): ThunkVoidAction =>\n    dispatch(actions.deleteBoard(id)),\n  dispatchUpdateBoard: (id: string, title: string): ThunkVoidAction =>\n    dispatch(actions.updateBoard(id, title)),\n  dispatchClearErrors: (): ThunkVoidAction => dispatch(actions.clearErrors()),\n  dispatchSelectBoard: (board: IBoard): ThunkVoidAction =>\n    dispatch(dashboardActions.selectBoard(board)),\n});\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default connector(Dashboard);\n"],"sourceRoot":""}